{{ define "layout_main" }}
{{ template "base" . }}
{{ end }}

{{ define "body" }}
<div class="h-full flex">
    <!-- Sidebar -->
    {{ template "sidebar" . }}

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col lg:pl-64">
        <!-- Top Bar -->
        {{ template "topbar" . }}

        <!-- Page Content -->
        <main class="flex-1 overflow-y-auto bg-gray-50">
            <div class="py-6">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <!-- Page Content -->
                    <div class="mt-4">
                        {{ block "content" . }}{{ end }}
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Mobile Sidebar Overlay -->
<div id="sidebar-overlay" class="hidden fixed inset-0 bg-gray-600 bg-opacity-75 z-20 lg:hidden"></div>
{{ end }}

{{ define "scripts" }}
<script src="/static/js/sidebar.js"></script>
<script>
    // Show toasts from flash messages
    document.addEventListener('DOMContentLoaded', function() {
        {{ if .flashMessage }}
            showToast('{{ .flashMessage }}', '{{ .flashType }}');
        {{ end }}
    });
</script>
{{ end }}
