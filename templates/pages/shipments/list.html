{{ template "base" . }}

{{ define "title" }}Shipment Groups{{ end }}

{{ define "content" }}
<div class="space-y-6">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <div>
            <h1 class="text-2xl font-bold text-gray-900">Shipment Groups</h1>
            <p class="text-sm text-gray-500 mt-1">Manage grouped shipments for this project</p>
        </div>
        <a href="/projects/{{ .project.ID }}/shipments/new" class="btn btn-primary text-sm">
            New Shipment
        </a>
    </div>

    {{ if .flashType }}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            showToast('{{ .flashMessage }}', '{{ .flashType }}');
        });
    </script>
    {{ end }}

    <!-- Shipment Groups Table -->
    <div class="card overflow-hidden p-0">
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-50 border-b border-gray-200">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Group</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Template</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Transit DC</th>
                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Sets</th>
                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Official DCs</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    {{ if .groups }}
                    {{ range .groups }}
                    <tr class="hover:bg-gray-50 cursor-pointer transition-colors"
                        onclick="window.location='/projects/{{ $.project.ID }}/shipments/{{ .ID }}'">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <a href="/projects/{{ $.project.ID }}/shipments/{{ .ID }}" class="text-brand-600 hover:text-brand-800 font-medium">
                                #{{ .ID }}
                            </a>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                            {{ .TemplateName }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                            {{ if .TransitDCNumber }}
                            <a href="/projects/{{ $.project.ID }}/dcs/{{ derefInt .TransitDCID }}" class="text-brand-600 hover:text-brand-800 font-mono text-xs" onclick="event.stopPropagation()">
                                {{ .TransitDCNumber }}
                            </a>
                            {{ else }}
                            <span class="text-gray-400">â€”</span>
                            {{ end }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-center">
                            {{ .NumSets }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-center">
                            {{ .OfficialDCCount }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            {{ if eq .Status "draft" }}
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800">Draft</span>
                            {{ else }}
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Issued</span>
                            {{ end }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                            {{ .CreatedAt.Format "02-Jan-2006" }}
                        </td>
                    </tr>
                    {{ end }}
                    {{ else }}
                    <tr>
                        <td colspan="7" class="px-6 py-12 text-center">
                            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                            </svg>
                            <h3 class="mt-4 text-lg font-medium text-gray-900">No shipment groups yet</h3>
                            <p class="mt-2 text-sm text-gray-500">Create your first shipment to get started.</p>
                            <a href="/projects/{{ .project.ID }}/shipments/new" class="mt-4 inline-block btn btn-primary text-sm">
                                New Shipment
                            </a>
                        </td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>
        </div>
    </div>
</div>
{{ end }}
