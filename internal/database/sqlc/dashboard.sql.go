// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: dashboard.sql

package db

import (
	"context"
	"database/sql"
	"time"
)

const CountBillToAddressesByProject = `-- name: CountBillToAddressesByProject :one
SELECT COUNT(*) AS total_bill_to_addresses
FROM addresses a
JOIN address_list_configs c ON a.config_id = c.id
WHERE c.project_id   = ?
  AND c.address_type = 'bill_to'
`

func (q *Queries) CountBillToAddressesByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountBillToAddressesByProject, projectID)
	var total_bill_to_addresses int64
	err := row.Scan(&total_bill_to_addresses)
	return total_bill_to_addresses, err
}

const CountDCsByProject = `-- name: CountDCsByProject :one

SELECT COUNT(*) AS total_dcs
FROM delivery_challans
WHERE project_id = ?
`

// =============================================================================
// DC counts - no date filter
// =============================================================================
func (q *Queries) CountDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountDCsByProject, projectID)
	var total_dcs int64
	err := row.Scan(&total_dcs)
	return total_dcs, err
}

const CountDCsByProjectFiltered = `-- name: CountDCsByProjectFiltered :one

SELECT COUNT(*) AS total_dcs
FROM delivery_challans
WHERE project_id  = ?
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountDCsByProjectFilteredParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

// =============================================================================
// DC counts - date-filtered variants (challan_date range)
// =============================================================================
func (q *Queries) CountDCsByProjectFiltered(ctx context.Context, arg CountDCsByProjectFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountDCsByProjectFiltered, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var total_dcs int64
	err := row.Scan(&total_dcs)
	return total_dcs, err
}

const CountDCsThisMonth = `-- name: CountDCsThisMonth :one

SELECT COUNT(*) AS dcs_this_month
FROM delivery_challans
WHERE project_id   = ?
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountDCsThisMonthParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

// =============================================================================
// DCs this month (fixed two-bound date filter; bounds computed in Go)
// =============================================================================
func (q *Queries) CountDCsThisMonth(ctx context.Context, arg CountDCsThisMonthParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountDCsThisMonth, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var dcs_this_month int64
	err := row.Scan(&dcs_this_month)
	return dcs_this_month, err
}

const CountDraftDCsByProject = `-- name: CountDraftDCsByProject :one
SELECT COUNT(*) AS draft_dcs
FROM delivery_challans
WHERE project_id = ?
  AND status     = 'draft'
`

// DraftDCs is intentionally not date-filtered in the Go code.
func (q *Queries) CountDraftDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountDraftDCsByProject, projectID)
	var draft_dcs int64
	err := row.Scan(&draft_dcs)
	return draft_dcs, err
}

const CountIssuedDCsByProject = `-- name: CountIssuedDCsByProject :one
SELECT COUNT(*) AS issued_dcs
FROM delivery_challans
WHERE project_id = ?
  AND status     = 'issued'
`

func (q *Queries) CountIssuedDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountIssuedDCsByProject, projectID)
	var issued_dcs int64
	err := row.Scan(&issued_dcs)
	return issued_dcs, err
}

const CountIssuedDCsByProjectFiltered = `-- name: CountIssuedDCsByProjectFiltered :one
SELECT COUNT(*) AS issued_dcs
FROM delivery_challans
WHERE project_id  = ?
  AND status      = 'issued'
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountIssuedDCsByProjectFilteredParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

func (q *Queries) CountIssuedDCsByProjectFiltered(ctx context.Context, arg CountIssuedDCsByProjectFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountIssuedDCsByProjectFiltered, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var issued_dcs int64
	err := row.Scan(&issued_dcs)
	return issued_dcs, err
}

const CountOfficialDCsByProject = `-- name: CountOfficialDCsByProject :one
SELECT COUNT(*) AS official_dcs
FROM delivery_challans
WHERE project_id = ?
  AND dc_type    = 'official'
`

func (q *Queries) CountOfficialDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountOfficialDCsByProject, projectID)
	var official_dcs int64
	err := row.Scan(&official_dcs)
	return official_dcs, err
}

const CountOfficialDCsByProjectFiltered = `-- name: CountOfficialDCsByProjectFiltered :one
SELECT COUNT(*) AS official_dcs
FROM delivery_challans
WHERE project_id  = ?
  AND dc_type     = 'official'
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountOfficialDCsByProjectFilteredParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

func (q *Queries) CountOfficialDCsByProjectFiltered(ctx context.Context, arg CountOfficialDCsByProjectFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountOfficialDCsByProjectFiltered, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var official_dcs int64
	err := row.Scan(&official_dcs)
	return official_dcs, err
}

const CountOfficialDraftDCsByProject = `-- name: CountOfficialDraftDCsByProject :one
SELECT COUNT(*) AS official_draft_dcs
FROM delivery_challans
WHERE project_id = ?
  AND dc_type    = 'official'
  AND status     = 'draft'
`

func (q *Queries) CountOfficialDraftDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountOfficialDraftDCsByProject, projectID)
	var official_draft_dcs int64
	err := row.Scan(&official_draft_dcs)
	return official_draft_dcs, err
}

const CountOfficialDraftDCsByProjectFiltered = `-- name: CountOfficialDraftDCsByProjectFiltered :one
SELECT COUNT(*) AS official_draft_dcs
FROM delivery_challans
WHERE project_id  = ?
  AND dc_type     = 'official'
  AND status      = 'draft'
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountOfficialDraftDCsByProjectFilteredParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

func (q *Queries) CountOfficialDraftDCsByProjectFiltered(ctx context.Context, arg CountOfficialDraftDCsByProjectFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountOfficialDraftDCsByProjectFiltered, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var official_draft_dcs int64
	err := row.Scan(&official_draft_dcs)
	return official_draft_dcs, err
}

const CountOfficialIssuedDCsByProject = `-- name: CountOfficialIssuedDCsByProject :one
SELECT COUNT(*) AS official_issued_dcs
FROM delivery_challans
WHERE project_id = ?
  AND dc_type    = 'official'
  AND status     = 'issued'
`

func (q *Queries) CountOfficialIssuedDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountOfficialIssuedDCsByProject, projectID)
	var official_issued_dcs int64
	err := row.Scan(&official_issued_dcs)
	return official_issued_dcs, err
}

const CountOfficialIssuedDCsByProjectFiltered = `-- name: CountOfficialIssuedDCsByProjectFiltered :one
SELECT COUNT(*) AS official_issued_dcs
FROM delivery_challans
WHERE project_id  = ?
  AND dc_type     = 'official'
  AND status      = 'issued'
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountOfficialIssuedDCsByProjectFilteredParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

func (q *Queries) CountOfficialIssuedDCsByProjectFiltered(ctx context.Context, arg CountOfficialIssuedDCsByProjectFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountOfficialIssuedDCsByProjectFiltered, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var official_issued_dcs int64
	err := row.Scan(&official_issued_dcs)
	return official_issued_dcs, err
}

const CountProductsByProject = `-- name: CountProductsByProject :one


SELECT COUNT(*) AS total_products
FROM products
WHERE project_id = ?
`

// dashboard.sql
// sqlc-annotated queries for the project dashboard.
//
// NOTE: GetDashboardStats in Go builds optional date filters (challan_date >= ?,
// challan_date <= ?) dynamically. sqlc requires static SQL.
// Two variants are provided for each DC count query:
//   - - no date filter
//     *Filtered  - both start and end date bound (most common production case)
//
// For single-bound date ranges, hand-written Go queries remain appropriate.
//
// GetDashboardStats also issues many small COUNT queries sequentially; those are
// all represented here. The Go wrapper function continues to call them individually
// and compose the DashboardStats struct.
// =============================================================================
// Entity counts (no date filter - these never filter by date in the Go code)
// =============================================================================
func (q *Queries) CountProductsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountProductsByProject, projectID)
	var total_products int64
	err := row.Scan(&total_products)
	return total_products, err
}

const CountSerialNumbersByProject = `-- name: CountSerialNumbersByProject :one

SELECT COUNT(*) AS total_serial_numbers
FROM serial_numbers
WHERE project_id = ?
`

// =============================================================================
// Serial numbers
// =============================================================================
func (q *Queries) CountSerialNumbersByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountSerialNumbersByProject, projectID)
	var total_serial_numbers int64
	err := row.Scan(&total_serial_numbers)
	return total_serial_numbers, err
}

const CountShipToAddressesByProject = `-- name: CountShipToAddressesByProject :one
SELECT COUNT(*) AS total_ship_to_addresses
FROM addresses a
JOIN address_list_configs c ON a.config_id = c.id
WHERE c.project_id   = ?
  AND c.address_type = 'ship_to'
`

func (q *Queries) CountShipToAddressesByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountShipToAddressesByProject, projectID)
	var total_ship_to_addresses int64
	err := row.Scan(&total_ship_to_addresses)
	return total_ship_to_addresses, err
}

const CountTemplatesByProject = `-- name: CountTemplatesByProject :one
SELECT COUNT(*) AS total_templates
FROM dc_templates
WHERE project_id = ?
`

func (q *Queries) CountTemplatesByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountTemplatesByProject, projectID)
	var total_templates int64
	err := row.Scan(&total_templates)
	return total_templates, err
}

const CountTransitDCsByProject = `-- name: CountTransitDCsByProject :one
SELECT COUNT(*) AS transit_dcs
FROM delivery_challans
WHERE project_id = ?
  AND dc_type    = 'transit'
`

func (q *Queries) CountTransitDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountTransitDCsByProject, projectID)
	var transit_dcs int64
	err := row.Scan(&transit_dcs)
	return transit_dcs, err
}

const CountTransitDCsByProjectFiltered = `-- name: CountTransitDCsByProjectFiltered :one
SELECT COUNT(*) AS transit_dcs
FROM delivery_challans
WHERE project_id  = ?
  AND dc_type     = 'transit'
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountTransitDCsByProjectFilteredParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

func (q *Queries) CountTransitDCsByProjectFiltered(ctx context.Context, arg CountTransitDCsByProjectFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountTransitDCsByProjectFiltered, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var transit_dcs int64
	err := row.Scan(&transit_dcs)
	return transit_dcs, err
}

const CountTransitDraftDCsByProject = `-- name: CountTransitDraftDCsByProject :one
SELECT COUNT(*) AS transit_draft_dcs
FROM delivery_challans
WHERE project_id = ?
  AND dc_type    = 'transit'
  AND status     = 'draft'
`

func (q *Queries) CountTransitDraftDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountTransitDraftDCsByProject, projectID)
	var transit_draft_dcs int64
	err := row.Scan(&transit_draft_dcs)
	return transit_draft_dcs, err
}

const CountTransitDraftDCsByProjectFiltered = `-- name: CountTransitDraftDCsByProjectFiltered :one
SELECT COUNT(*) AS transit_draft_dcs
FROM delivery_challans
WHERE project_id  = ?
  AND dc_type     = 'transit'
  AND status      = 'draft'
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountTransitDraftDCsByProjectFilteredParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

func (q *Queries) CountTransitDraftDCsByProjectFiltered(ctx context.Context, arg CountTransitDraftDCsByProjectFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountTransitDraftDCsByProjectFiltered, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var transit_draft_dcs int64
	err := row.Scan(&transit_draft_dcs)
	return transit_draft_dcs, err
}

const CountTransitIssuedDCsByProject = `-- name: CountTransitIssuedDCsByProject :one
SELECT COUNT(*) AS transit_issued_dcs
FROM delivery_challans
WHERE project_id = ?
  AND dc_type    = 'transit'
  AND status     = 'issued'
`

func (q *Queries) CountTransitIssuedDCsByProject(ctx context.Context, projectID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountTransitIssuedDCsByProject, projectID)
	var transit_issued_dcs int64
	err := row.Scan(&transit_issued_dcs)
	return transit_issued_dcs, err
}

const CountTransitIssuedDCsByProjectFiltered = `-- name: CountTransitIssuedDCsByProjectFiltered :one
SELECT COUNT(*) AS transit_issued_dcs
FROM delivery_challans
WHERE project_id  = ?
  AND dc_type     = 'transit'
  AND status      = 'issued'
  AND challan_date >= ?
  AND challan_date <= ?
`

type CountTransitIssuedDCsByProjectFilteredParams struct {
	ProjectID     int64
	ChallanDate   sql.NullTime
	ChallanDate_2 sql.NullTime
}

func (q *Queries) CountTransitIssuedDCsByProjectFiltered(ctx context.Context, arg CountTransitIssuedDCsByProjectFilteredParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, CountTransitIssuedDCsByProjectFiltered, arg.ProjectID, arg.ChallanDate, arg.ChallanDate_2)
	var transit_issued_dcs int64
	err := row.Scan(&transit_issued_dcs)
	return transit_issued_dcs, err
}

const GetRecentActivity = `-- name: GetRecentActivity :many

SELECT
    id,
    'dc'                                    AS entity_type,
    id                                      AS entity_id,
    dc_number                               AS title,
    dc_type || ' DC ' || status            AS description,
    status,
    created_at,
    project_id
FROM delivery_challans
WHERE project_id = ?
ORDER BY created_at DESC
LIMIT ?
`

type GetRecentActivityParams struct {
	ProjectID int64
	Limit     int64
}

type GetRecentActivityRow struct {
	ID          int64
	EntityType  string
	EntityID    int64
	Title       string
	Description interface{}
	Status      string
	CreatedAt   sql.NullTime
	ProjectID   int64
}

// =============================================================================
// Recent activity feed
// =============================================================================
func (q *Queries) GetRecentActivity(ctx context.Context, arg GetRecentActivityParams) ([]GetRecentActivityRow, error) {
	rows, err := q.db.QueryContext(ctx, GetRecentActivity, arg.ProjectID, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetRecentActivityRow{}
	for rows.Next() {
		var i GetRecentActivityRow
		if err := rows.Scan(
			&i.ID,
			&i.EntityType,
			&i.EntityID,
			&i.Title,
			&i.Description,
			&i.Status,
			&i.CreatedAt,
			&i.ProjectID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const GetRecentDCs = `-- name: GetRecentDCs :many

SELECT
    dc.id,
    dc.dc_number,
    dc.dc_type,
    p.name                         AS project_name,
    dc.project_id,
    COALESCE(dc.challan_date, '')  AS challan_date,
    dc.status,
    COALESCE(dc.created_at, '')    AS created_at
FROM delivery_challans dc
LEFT JOIN projects p ON dc.project_id = p.id
WHERE dc.project_id = ?
ORDER BY dc.created_at DESC
LIMIT ?
`

type GetRecentDCsParams struct {
	ProjectID int64
	Limit     int64
}

type GetRecentDCsRow struct {
	ID          int64
	DcNumber    string
	DcType      string
	ProjectName sql.NullString
	ProjectID   int64
	ChallanDate time.Time
	Status      string
	CreatedAt   time.Time
}

// =============================================================================
// Recent DCs feed
// =============================================================================
func (q *Queries) GetRecentDCs(ctx context.Context, arg GetRecentDCsParams) ([]GetRecentDCsRow, error) {
	rows, err := q.db.QueryContext(ctx, GetRecentDCs, arg.ProjectID, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetRecentDCsRow{}
	for rows.Next() {
		var i GetRecentDCsRow
		if err := rows.Scan(
			&i.ID,
			&i.DcNumber,
			&i.DcType,
			&i.ProjectName,
			&i.ProjectID,
			&i.ChallanDate,
			&i.Status,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
